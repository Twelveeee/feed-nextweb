@import "tailwindcss";

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* Tailwind v4 dark mode configuration */
@variant dark (.dark &);

:root {
  --background: #ffffff;
  --foreground: #171717;
  --card-bg: #ffffff;
  --card-hover-bg: #f9fafb;
  --border-color: #e5e7eb;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/*
 * 强制 dark 模式样式应用
 * 当 html 元素上有 .dark 类时，应用深色模式变量
 */
html.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
  --card-bg: #1a1a1a;
  --card-hover-bg: #262626;
  --border-color: #333333;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);
}

@media (prefers-color-scheme: dark) {
  /* 系统默认深色且没有 .light 类时，使用深色变量 */
  html:not(.light) {
    --background: #0a0a0a;
    --foreground: #ededed;
    --card-bg: #1a1a1a;
    --card-hover-bg: #262626;
    --border-color: #333333;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* 全局过渡动画 */
* {
  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

/* 卡片样式 */
.card {
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
}

.card:hover {
  background: var(--card-hover-bg);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

/* 按钮悬停效果 */
button, .button {
  transition: all 0.2s ease;
}

button:hover:not(:disabled), .button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

button:active:not(:disabled), .button:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* 链接悬停效果 */
a {
  transition: color 0.2s ease;
}

/* 输入框焦点效果 */
input:focus, textarea:focus, select:focus {
  outline: none;
  ring: 2px;
  ring-color: rgb(59 130 246 / 0.5);
  border-color: rgb(59 130 246);
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--background);
}

::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

html.dark ::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* 文章内容样式 */
.article-content {
  @apply text-gray-800 dark:text-gray-200 leading-relaxed;
}

.article-content * {
  @apply text-gray-800 dark:text-gray-200;
}

.article-content p {
  @apply mb-4;
}

.article-content h1,
.article-content h2,
.article-content h3,
.article-content h4,
.article-content h5,
.article-content h6 {
  @apply font-bold mt-6 mb-3 text-gray-900 dark:text-gray-100;
}

.article-content h1 {
  @apply text-2xl;
}

.article-content h2 {
  @apply text-xl;
}

.article-content h3 {
  @apply text-lg;
}

.article-content a {
  @apply text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 underline;
}

.article-content ul,
.article-content ol {
  @apply mb-4 pl-6;
}

.article-content ul {
  @apply list-disc;
}

.article-content ol {
  @apply list-decimal;
}

.article-content li {
  @apply mb-2;
}

.article-content blockquote {
  @apply border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4 text-gray-600 dark:text-gray-400;
}

.article-content code {
  @apply bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 px-1.5 py-0.5 rounded text-sm font-mono;
}

.article-content pre {
  @apply bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto mb-4;
}

.article-content pre code {
  @apply bg-transparent p-0;
}

.article-content img {
  @apply max-w-full h-auto rounded-lg my-4;
}

.article-content table {
  @apply w-full border-collapse mb-4;
}

.article-content th,
.article-content td {
  @apply border border-gray-300 dark:border-gray-600 px-4 py-2;
}

.article-content th {
  @apply bg-gray-100 dark:bg-gray-800 font-semibold;
}

.article-content strong {
  @apply font-bold;
}

.article-content em {
  @apply italic;
}

/*
 * AI 生成内容的暗色模式适配
 * 在暗色模式下，使用 !important 强制覆盖内联样式，以适配系统主题
 * 邮件客户端会忽略这些类，继续使用内联样式（浅色）
 */
html.dark .ai-quote {
  background: var(--card-hover-bg) !important;
  border-left-color: #3b82f6 !important;
  box-shadow: none !important;
}
html.dark .ai-quote p {
  color: var(--foreground) !important;
}

html.dark .ai-card {
  background-color: var(--card-bg) !important;
  box-shadow: none !important;
  border: 1px solid var(--border-color) !important;
}
html.dark .ai-card p {
  color: var(--foreground) !important;
}
html.dark .ai-card p:last-child {
  color: #60a5fa !important; /* 蓝色高亮在暗色下调整为更亮的蓝 */
}

html.dark .ai-list-item {
  color: var(--foreground) !important;
}
/* 圆圈数字保持原样或微调 */
html.dark .ai-list-num {
  background-color: #3b82f6 !important;
  color: #ffffff !important;
}

html.dark .ai-highlight {
  background: linear-gradient(180deg, rgba(255,255,255,0) 50%, rgba(59,130,246,0.3) 50%) !important;
  color: inherit !important;
}

html.dark .ai-table-wrap {
  background-color: var(--card-hover-bg) !important;
}
html.dark .ai-table-th {
  border-bottom-color: var(--border-color) !important;
  color: var(--foreground) !important;
}
html.dark .ai-table-td {
  border-bottom-color: var(--border-color) !important;
  color: var(--foreground) !important;
}
